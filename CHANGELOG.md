## Luca::Jp 0.20.4 / LucaSalary::Jp 0.2.1

* 扶養控除の計算をjp-national-tax gemに切り替え。控除対象者の収入計算に対応

## Luca::Jp 0.20.3 / LucaSalary::Jp 0.2.0

* 年末調整の基礎控除基準額、課税所得金額の修正

## Luca::Jp 0.20.2

* LucaSalary::Jp 介護保険料の判定

## Luca::Jp 0.20.1

* 適用額明細書の軽減税適用状況にもとづく判定

## Luca::Jp 0.20.0

* 法人税・消費税・地方税の2024年度バージョン追加
* `luca-jp houjinzei|chihouzei --kessan yyyy-mm-dd`による決算確定の日指定をサポート
* `luca-jp urikake`がインボイス登録番号として、LucaDeal::Customerの`tax_id`フィールドを参照
* 勘定科目内訳書（地代家賃・買掛金）： インボイス登録番号追加
* 法人概況説明書： バージョン別の地代家賃欄の変更
* 法人概況説明書： 電子帳簿保存法のconfigを追加
* Fix: 繰越損失の当期除外判定。うるう年や決算期変更の影響を考慮
* Fix: 繰越損失の地方税申告向け期間表示

## Luca::Jp 0.19.1

* 別表四の社外流出欄を帳票フィールド仕様書に沿って、本書と外書に分離
* 役員報酬の合計欄を追記

## Luca::Jp 0.19.0

* `luca-jp houjinzei`サブコマンドがデフォルトでXBRL2.1財務諸表を同梱する挙動に変更

## Luca::Jp 0.18.1

* `luca-jp urikake`サブコマンドのバックエンド更新。LucaDeal機能を用いて過去10年の未決済売掛金を集計

## Luca::Jp 0.18.0

* 受取配当金の益金不算入額を指定した場合に、別表６（１）・別表８（１）生成
* 寄付金の損金不算入額計算、別表１４（２）生成。指定寄付金（C1X1）を損金算入対象として自動認識
* 交際費（C1B）の計上金額がない場合、別表１５の生成を除外

## Luca::Jp 0.17.2

* 税額控除対象となる所得税の処理を追加
  * 経過勘定「仮払所得税」または費用勘定「所得税税額控除」を期末に自動認識する
  * 租税公課に計上するケースのため、別表4調整金額のconfig`損金不算入.所得税`も認識する

## Luca::Jp 0.17.1

* Fix: 別表7の期首繰越損失を当期控除前の額に修正

## Luca::Jp 0.17.0

* 消費税簡易申告書バージョン23.0.0の追加
  * `syouhizei_kubun`: 2023の設定によりインボイス制度の2割特例の申告書を生成
* 基準期間の課税売上高の記載追加。2年度前の売上高を参照
* 別表4など所得計算リファイン
  * 別表4調整金額のconfig機構を追加
  * 仮払経理による税金還付のケースは、事業税のみ還付部分を税額計算時に循環参照するため中間納付全額を損金とせざるを得ず、減算・加算調整。税金還付を損金経理するケースは、雑収入を税目別に追跡する必要があるため考慮から除外。

## Luca::Jp 0.16.3

* Switch to `LucaCmd.check_dir()` with `ext_conf` option.

## Luca::Jp 0.16.2

* 給与報告の扶養対象家族の区分別人数を算出

## Luca::Jp 0.16.1

* Reworked global constants w/LucaRecord v0.7
* add `luca-book version` subcommand

## Luca::Jp 0.15.0

* 法人税令和4年度フォーマットの反映: 別表１、別表１次葉、別表４簡易、別表５１、別表５２、別表７、別表１５
* 地方税フォーマットのバージョン判定
* 適用額明細書: 期末資本金額による中小企業の判定追加。少額減価償却資産のチェックメッセージ追加
* 役員報酬の勘定科目内訳書に代表者情報を記載
* 勘定科目内訳書（雑益雑損失）を追加生成
* `luca-jp urikake`のデフォルト文字コードをShiftJISに変更。総額オプションなし時に自動合計行を追加

## Luca::Jp 0.14.2

* LucaSalary::Jp 保険料のロードをLucaBase.load_data()に変更。小数の値をBigDecimalとして扱う

## Luca::Jp 0.14.1

* LucaSalary::Jp 保険料のエリア指定を考慮。有効な最新テーブルを選択

## Luca::Jp 0.14.0

* `luca-jp kyuyo --export`: 給与支払報告CSVの実装。lucasalary-jp gemをマージしたもの

## Luca::Jp 0.13.0

* Ruby 3.1との互換性 (Replace YAML.load/load_file to YAML.safe_load)

## Luca::Jp 0.12.4

* 別表四、別表五一、別表五二の還付金算入

## Luca::Jp 0.12.3

* 別表五二の数値表示修正

## Luca::Jp 0.12.2

* 概況説明の試算未設定のエラー対処

## Luca::Jp 0.12.1

* 東京都均等割の明細のフォーマット修正

## Luca::Jp 0.12.0

* `luca-jp chihouzei --export`の出力に地方税申告事務所(jp.eltax.reports.jimusho_name)を追加。未払、未収の追跡用
* 複数自治体をサポートのため`luca-jp chihouzei`の還付税額の計算を`x-customer`にもとづいてフィルタ。

## Luca::Jp 0.11.0

* 課税標準の分割基準の計算(その他業種)
* 事業所数の設定追加
* 均等割額、法人税割税率、所得割税率の自治体別カスタマイズ
* Fix: 地方法人特別税 -> 特別法人事業税

## Luca::Jp 0.10.1

* `--export`が出力する確定税額費用を補助科目に分類
* 別表五二の地方税納税項目を直接計算ではなく伝票を参照する方式に変更

## Luca::Jp 0.10.0

* `--lastyear`オプション追加。会計年度の設定を参照
* 市民税向け事業所名設定追加

## Luca::Jp 0.9.1

* 市町村申請用20号様式の初期実装

## Luca::Jp 0.9.0

* 均等割計算の従業員数設定の追加
* 将来の地方税複数申告のための変更

## Luca::Jp 0.8.1

* 内訳明細書預貯金の摘要

## Luca::Jp 0.8.0

* 別表二の自己株式の計算
* 別表四の事業税仮払経理の減算
* 別表五一の自己株式の計算
* 地方法人税の資本金等の額の計算、税率区分の拡充

## Luca::Jp 0.7.1

* Fix: 資本金等の額の自己株式の額

## Luca::Jp 0.7.0

* 法人事業概況書のconfig拡充
* 勘定科目内訳書(有価証券)の期中金額異動集計

## Luca::Jp 0.6.0

* 別表五一資本金の額の計算の対象科目追加
* Fix: 別表の法人税割金額の100円未満切り捨て

## Luca::Jp 0.5.0

* 地方税確定申告2020/4/1開始年度サポート
* Fix: 資本金等の額
* 提出日の記載

## Luca::Jp 0.4.0

* 法人税確定申告v21.0.2サポート

## Luca::Jp 0.3.0

* 消費税簡易課税申告v20.0.1サポート
* Fix: 消費税申告区分

## Luca::Jp 0.2.4

* Fix: 地方税六号様式の法人税割計算の基礎となる法人税額

## Luca::Jp 0.2.3

* Fix: 別表五一期中減、別表五二事業税中間納付

## Luca::Jp 0.2.2

* Fix: Include Common from Syouhizei

## Luca::Jp 0.2.1

* implement additional fields

## Luca::Jp 0.2.0

* implement 概況説明 config
* implement 買掛金内訳明細、借入金内訳明細、地代家賃内訳明細、有価証券内訳明細

## Luca::Jp 0.1.8

* implement 別表二 template
* implement `luca-jp urikake` for LucaDeal

## Luca::Jp 0.1.7

* implement USERINF template

## Luca::Jp 0.1.6

* refine 別表四、別表5-1、別表5-2

## Luca::Jp 0.1.5

* 未収還付は損金の戻り益金ではないため所得計算から還付事業税を除外
* 別表5-2の期末未収税金の記載

## Luca::Jp 0.1.4

* 繰越損失管理の初期実装。別表7 / 6号様式別表9

## Luca::Jp 0.1.3

* config-lucajp.ymlを追加ロード。LucaBookとconfigを分割可能
* IT部にeltax_idを追加

## Luca::Jp 0.1.2

* 別表4, 別表5-2の中間納付の内訳を実装。仮払税金を分類できていることが条件
* 確定税額は、法人税と地方税を一括計算するロジックを導入
* 法人税割と均等割の関数の戻り値を都道府県と市に分割
* IT部をconfigから生成

## Luca::Jp 0.1.1

* 法人税、消費税、地方税の計算
* etax, eltax用XML生成
